// --- Malla Interactiva Enfermer칤a UBO 2025 ---
// --- Generado autom치ticamente desde tu malla ---

export const COURSES = [
  // 1춿 Semestre
  { semestre: "1춿 Semestre", nombre: "Fundamentos de Biolog칤a y Gen칠tica Humana", prerreq: [] },
  { semestre: "1춿 Semestre", nombre: "Bases Qu칤micas y Bioqu칤micas de la Vida", prerreq: [] },
  { semestre: "1춿 Semestre", nombre: "Gesti칩n del Cuidado en Enfermer칤a I", prerreq: [] },
  { semestre: "1춿 Semestre", nombre: "Educaci칩n en Enfermer칤a", prerreq: [] },
  { semestre: "1춿 Semestre", nombre: "Identidad Universitaria I", prerreq: [] },
  { semestre: "1춿 Semestre", nombre: "Lengua Extranjera I", prerreq: [] },
  { semestre: "1춿 Semestre", nombre: "Pr치ctica Integrada en Enfermer칤a I", prerreq: [] },

  // 2춿 Semestre
  { semestre: "2춿 Semestre", nombre: "Lengua Extranjera II", prerreq: ["Lengua Extranjera I"] },
  { semestre: "2춿 Semestre", nombre: "Identidad Universitaria II", prerreq: ["Identidad Universitaria I"] },
  { semestre: "2춿 Semestre", nombre: "Gesti칩n del Cuidado en Enfermer칤a II", prerreq: ["Gesti칩n del Cuidado en Enfermer칤a I"] },
  { semestre: "2춿 Semestre", nombre: "Matem치ticas y Herramientas Inform치ticas para la Gesti칩n en Salud", prerreq: ["Educaci칩n en Enfermer칤a"] },
  { semestre: "2춿 Semestre", nombre: "Pr치ctica Integrada en Enfermer칤a II", prerreq: ["Pr치ctica Integrada en Enfermer칤a I"] },
  { semestre: "2춿 Semestre", nombre: "Morfolog칤a Micro y Macrosc칩pica", prerreq: ["Fundamentos de Biolog칤a y Gen칠tica Humana"] },
  { semestre: "2춿 Semestre", nombre: "Microbiolog칤a y Agentes Infecciosos", prerreq: ["Bases Qu칤micas y Bioqu칤micas de la Vida"] },

  // 3춿 Semestre
  { semestre: "3춿 Semestre", nombre: "Lengua Extranjera III", prerreq: ["Lengua Extranjera II"] },
  { semestre: "3춿 Semestre", nombre: "Gesti칩n del Cuidado en Enfermer칤a III", prerreq: ["Gesti칩n del Cuidado en Enfermer칤a II"] },
  { semestre: "3춿 Semestre", nombre: "Pr치ctica Integrada en Enfermer칤a III", prerreq: ["Pr치ctica Integrada en Enfermer칤a II"] },
  { semestre: "3춿 Semestre", nombre: "Integrado Fisiolog칤a, Fisiopatolog칤a y Farmacolog칤a en Enfermer칤a I", prerreq: ["Morfolog칤a Micro y Macrosc칩pica"] },

  // 4춿 Semestre
  { semestre: "4춿 Semestre", nombre: "Lengua Extranjera IV", prerreq: ["Lengua Extranjera III"] },
  { semestre: "4춿 Semestre", nombre: "Responsabilidad Social Universitaria", prerreq: ["Formaci칩n 칄tica para el Desarrollo Sostenible"] },
  { semestre: "4춿 Semestre", nombre: "Gesti칩n del Cuidado en Enfermer칤a IV", prerreq: ["Gesti칩n del Cuidado en Enfermer칤a III","Pr치ctica Integrada en Enfermer칤a III"] },
  { semestre: "4춿 Semestre", nombre: "Enfermer칤a en Salud P칰blica y Determinantes Sociales", prerreq: ["Matem치ticas y Herramientas Inform치ticas para la Gesti칩n en Salud"] },
  { semestre: "4춿 Semestre", nombre: "Integrado Fisiolog칤a, Fisiopatolog칤a y Farmacolog칤a en Enfermer칤a II", prerreq: ["Integrado Fisiolog칤a, Fisiopatolog칤a y Farmacolog칤a en Enfermer칤a I"] },
  { semestre: "4춿 Semestre", nombre: "Pr치ctica Integrada en Enfermer칤a IV", prerreq: ["Pr치ctica Integrada en Enfermer칤a III","Gesti칩n del Cuidado en Enfermer칤a III"] },

  // 5춿 Semestre
  { semestre: "5춿 Semestre", nombre: "칄tica y Bio칠tica en Enfermer칤a", prerreq: ["Gesti칩n del Cuidado en Enfermer칤a IV"] },
  { semestre: "5춿 Semestre", nombre: "Gesti칩n del Cuidado en Comunidades I", prerreq: ["Enfermer칤a en Salud P칰blica y Determinantes Sociales","Integrado Fisiolog칤a, Fisiopatolog칤a y Farmacolog칤a en Enfermer칤a II"] },
  { semestre: "5춿 Semestre", nombre: "Gesti칩n del Cuidado en el Adulto", prerreq: ["Integrado Fisiolog칤a, Fisiopatolog칤a y Farmacolog칤a en Enfermer칤a II","Gesti칩n del Cuidado en Enfermer칤a IV","Pr치ctica Integrada en Enfermer칤a IV"] },
  { semestre: "5춿 Semestre", nombre: "Gesti칩n del Cuidado en la Persona Mayor", prerreq: ["Integrado Fisiolog칤a Fisiopatolog칤a y Farmacolog칤a en Enfermer칤a II","Gesti칩n del Cuidado en Enfermer칤a IV","Pr치ctica Integrada en Enfermer칤a IV"] },
  { semestre: "5춿 Semestre", nombre: "Planificaci칩n Estrat칠gica I", prerreq: ["Gesti칩n del Cuidado en Enfermer칤a IV"] },
  { semestre: "5춿 Semestre", nombre: "Pr치ctica Integrada en Enfermer칤a V", prerreq: ["Pr치ctica Integrada en Enfermer칤a IV","Enfermer칤a en Salud P칰blica y Determinantes Sociales"] },

  // 6춿 Semestre
  { semestre: "6춿 Semestre", nombre: "Metodolog칤a de la Investigaci칩n", prerreq: ["칄tica y Bio칠tica en Enfermer칤a"] },
  { semestre: "6춿 Semestre", nombre: "Gesti칩n del Cuidado en Comunidades II", prerreq: ["Gesti칩n del Cuidado en Comunidades I","Pr치ctica Integrada en Enfermer칤a V"] },
  { semestre: "6춿 Semestre", nombre: "Salud Ocupacional", prerreq: ["Gesti칩n del Cuidado en el Adulto"] },
  { semestre: "6춿 Semestre", nombre: "Planificaci칩n Estrat칠gica II", prerreq: ["Planificaci칩n Estrat칠gica I"] },
  { semestre: "6춿 Semestre", nombre: "Pr치ctica Integrada en Enfermer칤a VI", prerreq: ["Pr치ctica Integrada en Enfermer칤a V","Gesti칩n del Cuidado en Comunidades I"] },

  // 7춿 Semestre
  { semestre: "7춿 Semestre", nombre: "Seminario de investigaci칩n en Enfermer칤a I", prerreq: ["Metodolog칤a de la Investigaci칩n"] },
  { semestre: "7춿 Semestre", nombre: "Gesti칩n del Cuidado en Comunidades III", prerreq: ["Gesti칩n del Cuidado en Comunidades II","Pr치ctica Integrada en Enfermer칤a VI"] },
  { semestre: "7춿 Semestre", nombre: "Gesti칩n del Cuidado en la infancia y adolescencia I", prerreq: ["Salud Ocupacional","Gesti칩n del Cuidado en Comunidades II"] },
  { semestre: "7춿 Semestre", nombre: "Bienestar Profesional", prerreq: ["Salud Ocupacional"] },
  { semestre: "7춿 Semestre", nombre: "Pr치ctica Integrada en Enfermer칤a VII", prerreq: ["Salud Ocupacional","Pr치ctica Integrada en Enfermer칤a VI"] },

  // 8춿 Semestre
  { semestre: "8춿 Semestre", nombre: "Seminario de Investigaci칩n en Enfermer칤a II", prerreq: ["Seminario de Investigaci칩n en Enfermer칤a I"] },
  { semestre: "8춿 Semestre", nombre: "Gesti칩n del Cuidado en la Infancia y Adolescencia II", prerreq: ["Gesti칩n del Cuidado en la Infancia y Adolescencia I","Pr치ctica Integrada en Enfermer칤a VII"] },
  { semestre: "8춿 Semestre", nombre: "Gesti칩n del Cuidado en Urgencias", prerreq: ["Gesti칩n del Cuidado en la Infancia y Adolescencia I","Pr치ctica Integrada en Enfermer칤a VII"] },
  { semestre: "8춿 Semestre", nombre: "Gesti칩n del Cuidado en Salud Mental y Psiquiatr칤a", prerreq: ["Gesti칩n del Cuidado en la Infancia y Adolescencia I","Pr치ctica Integrada en Enfermer칤a VII"] },
  { semestre: "8춿 Semestre", nombre: "Gesti칩n del Cuidado en Oncolog칤a y Cuidados Paliativos", prerreq: ["Gesti칩n del Cuidado en la Infancia y Adolescencia I","Gesti칩n del Cuidado en Comunidades III","Pr치ctica Integrada en Enfermer칤a VII"] },
  { semestre: "8춿 Semestre", nombre: "Pr치ctica Integrada en Enfermer칤a VIII", prerreq: ["Pr치ctica Integrada en Enfermer칤a VII","Gesti칩n del Cuidado en la Infancia y Adolescencia I"] },

  // 9춿 Semestre
  { semestre: "9춿 Semestre", nombre: "Intervenci칩n de Enfermer칤a en Salud Comunitaria (Opci칩n A)", prerreq: ["Aprobadas asignaturas de 1er a 8vo semestre inclusive"] },
  { semestre: "9춿 Semestre", nombre: "Enfermer칤a en Salud Familiar (Opci칩n A)", prerreq: ["Aprobadas asignaturas de 1er a 8vo semestre inclusive"] },
  { semestre: "9춿 Semestre", nombre: "Pr치ctica profesional en Enfermer칤a Hospitalaria (Opci칩n A)", prerreq: ["Aprobadas asignaturas de 1er a 8vo semestre inclusive"] },
  { semestre: "9춿 Semestre", nombre: "Cuidados de Enfermer칤a en Adulto Cr칤tico (Opci칩n B)", prerreq: ["Aprobadas asignaturas de 1er a 8vo semestre inclusive"] },
  { semestre: "9춿 Semestre", nombre: "Enfermer칤a en Unidades Quir칰rgicas del Adulto (Opci칩n B)", prerreq: ["Aprobadas asignaturas de 1er a 8vo semestre inclusive"] },
  { semestre: "9춿 Semestre", nombre: "Pr치ctica Profesional en Enfermer칤a en Atenci칩n Primaria de Salud (Opci칩n B)", prerreq: ["Aprobadas asignaturas de 1er a 8vo semestre inclusive"] },

  // 10춿 Semestre
  { semestre: "10춿 Semestre", nombre: "Pr치ctica Profesional en Enfermer칤a en Atenci칩n Primaria de Salud (Opci칩n A)", prerreq: ["Intervenci칩n de Enfermer칤a en Salud Comunitaria (Opci칩n A)","Enfermer칤a en Salud Familiar (Opci칩n A)"] },
  { semestre: "10춿 Semestre", nombre: "Pr치ctica Profesional en Enfermer칤a Hospitalaria (Opci칩n B)", prerreq: ["Cuidados de Enfermer칤a en Adulto Cr칤tico (Opci칩n B)","Enfermer칤a en Unidades Quir칰rgicas del Adulto (Opci칩n B)"] }
];
// --- Renderizado Malla ---
const semestersDiv = document.getElementById("semesters");
const resetBtn = document.getElementById("resetBtn");
const selectedCount = document.getElementById("selectedCount");
let state = JSON.parse(localStorage.getItem("mallaState")) || {};

function saveState() { localStorage.setItem("mallaState", JSON.stringify(state)); }
function updateCount() { selectedCount.textContent = `Seleccionados: ${Object.values(state).filter(v=>v==="done").length}`; }

const semestres = {};
COURSES.forEach(c => { if(!semestres[c.semestre]) semestres[c.semestre]=[]; semestres[c.semestre].push(c); });

function render() {
  semestersDiv.innerHTML = "";
  Object.entries(semestres).forEach(([semestre, cursos]) => {
    const card = document.createElement("div");
    card.className = "semester-card";
    card.innerHTML = `<h3>游눌 ${semestre}</h3><div class="courses"></div>`;
    const list = card.querySelector(".courses");

    cursos.forEach(curso => {
      const el = document.createElement("div");
      const key = curso.nombre;
      const status = state[key] || "locked";
      const canUnlock = curso.prerreq.length === 0 || curso.prerreq.every(p => state[p]==="done");
      const cssClass = status==="done" ? "done" : canUnlock ? "available" : "locked";
      el.className = `course ${cssClass}`;
      el.textContent = curso.nombre;
      el.addEventListener("click", () => { if(cssClass==="locked") return; state[key] = state[key]==="done"?"available":"done"; saveState(); render(); });
      list.appendChild(el);
    });

    semestersDiv.appendChild(card);
  });
  updateCount();
}

resetBtn.addEventListener("click", () => { if(confirm("쯉eguro que quieres reiniciar la malla?")) { state={}; saveState(); render(); } });
render();

// --- Emojis flotantes ---
function createEmoji() {
  const emoji = document.createElement("div");
  emoji.textContent = "游눌";
  emoji.className = "emoji";
  emoji.style.left = `${Math.random()*100}%`;
  emoji.style.top = `-50px`;
  emoji.style.fontSize = `${Math.random()*30+20}px`;
  document.body.appendChild(emoji);
  let top = -50;
  const speed = Math.random()*2+1;
  function fall() {
    top += speed;
    emoji.style.top = `${top}px`;
    if(top < window.innerHeight + 50) requestAnimationFrame(fall);
    else emoji.remove();
  }
  fall();
}
setInterval(createEmoji, 300);
